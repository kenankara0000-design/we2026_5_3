---
name: ""
overview: ""
todos: []
isProject: false
---

# Plan: Kundenübersicht (3 Tabs) – UX/UI-Analyse & Vorschläge

Erstellt am: 2026-02-12_12-30

## Anlass / Frage (Original)

Wie können wir die Kundenübersicht mit den 3 Tabs besser designen bzw. besser machen?  
Was wären Vorschläge: was würde wo mehr Sinn machen, bzw. design-technisch welche Bereiche verbessern? (nur Analyse)

## Kontext (Ist-Zustand aus Code)

- Kundenübersicht hat Tabs: **Gewerblich / Privat / Tour**
- Oben: Suche + Filter (aufklappbar)
- Filter: KundenTyp (Alle/Regelmäßig/Unregelmäßig/Auf Abruf), Ohne Tour, Keine Termine, Pausierte
- Admin: Bulk-Modus (Auswählen), Export, Neuer Kunde
- Karten zeigen: Typ-Badge (G/P/T aktuell → künftig G/P/L für Listenkunden), Name, Adresse, optional A/L-Wochentag-Text, optional Foto

## Vorschläge

### Tab-Struktur (Gewerblich / Privat / Listenkunden)

- Tabs sind als **Primär-Schnitt** okay (mentales Modell „Kundenart“). Optimierung: **pro Tab eine klare Default-„Arbeitsansicht“**, statt „alles ist überall gleich“.
- **Tab-Titel mit Counts/Badges** (z. B. „Gewerblich (128)“) – hilft sofort bei Orientierung, besonders bei aktiven Filtern.
- **„Tour“ → „Listenkunden“ (festgelegt)**: Tab-Titel von „Tour“ auf **„Listenkunden“** umstellen (keine Verwechslung mit Touren Planer). Typ-Badge für diese Kunden: **„L“** (statt „T“) – also G / P / L.
- **„Pausiert“ als sichtbarer Zustands-Switch** statt „nur im aufgeklappten Filter“: Default „Pausierte ausblenden“ ist gut, aber UI sollte den Zustand **sichtbar** machen (Chip „Pausiert: Aus/An“ direkt oben).

### Suche + Filter (Informationsarchitektur)

- **Filter-Zusammenfassung im Collapsed-State**: Wenn Filter eingeklappt sind, aktive Filter als Chips unter der Suche anzeigen (mit „×“ zum Entfernen) + **„Filter zurücksetzen“**.
- **Schnellfilter vs. Detailfilter trennen**:
  - Schnellfilter immer sichtbar: **Regelmäßig/Unregelmäßig/Auf Abruf**, **Pausiert**, **Ohne Tour**, **Keine Termine**
  - Rest in **Bottom-Sheet/Drawer** statt „Filter aufklappen“ im Listen-Flow (aufgeräumter, besser skalierbar)
- **Filter-Logik als UI-Hinweis**: „Keine Termine“ schließt „Ohne Tour“-Kunden aus (sonst wirkt das Ergebnis „falsch“). In der UI klar erklären/labeln.
- **Sortierung ergänzen** (kleines Menü neben Filter):
  - Alphabetisch (aktuell)
  - **Nächster Termin** / „**überfällig zuerst**“
  - **Stadt/PLZ** (Routen/Cluster)
  - (Listenkunden-Tab) **Wochentag/Zeitfenster**

### Karten-Design (was auf der Kundenkarte wirklich hilft)

- Zusätzliche **Status-Badges** (klein, rechts oben oder unter dem Namen):
  - **PAUSIERT**, **OHNE TOUR**, **KEINE TERMINE**
  - optional **„Auf Abruf“** als Badge (statt nur Filterwissen)
- **1 „nächster relevanter Termin“-Zeile** statt/zusätzlich zu A/L-Wochentag:
  - z. B. „Nächste Abholung: Di 18.02“ oder „Überfällig seit …“
- **Listenkunden-Tab spezifisch**: statt generischer Adresse mehr **TourSlot-Info** (Wochentag + Zeitfenster + Stadt) – das ist hier der Mehrwert.
- **Tap-Targets vereinheitlichen**: Karte als Ganzes klickbar (nicht nur Textbereich). In Bulk-Mode bleibt Checkbox separat, sonst „Full-card click“.

### Bulk/Export/Neuer Kunde (Admin-Flow)

- **Bulk-Mode als klarer Modus**: Wenn aktiv, TopBar stärker umstellen (z. B. „X ausgewählt“, „Alle (gefiltert) auswählen“, „Auswahl löschen“).
- **Export kontextabhängig**: Wenn Filter aktiv sind, UI klar machen, ob Export **alles** oder **gefilterte Menge** exportiert (optional Auswahl/Preview).
- **„Neuer Kunde“ (FAB)**: ist gut, aber im Admin-Header schon viel los. Option: FAB klassisch „floating“ über Liste, Export/Select in AppBar.

### Kleine, aber spürbare UX-Details

- **Ergebnisanzahl** anzeigen („87 Kunden“ / „12 Treffer“) direkt unter der Suche.
- **Empty-States pro Tab** mit 1 sinnvoller Aktion:
  - z. B. „Keine Listenkunden ohne TourSlot“ → Button „Filter zurücksetzen“ oder „Neuer Kunde“
- **Chips layout-sicher**: FilterChip-Reihen werden auf kleinen Screens eng; Idee: Chips horizontal scrollen oder sauber umbrechen (2 Zeilen).

## Offene Rückfrage (für gezieltes Finetuning)

Wenn klar ist, was euch am meisten stört (z. B. „zu viele Kunden, ich finde nichts“ vs. „Listenkunden-Tab bringt nicht den richtigen Fokus“), können die Vorschläge auf **1–2 Ziel-Workflows** (Fahrer/Dispo/Büro) zugeschnitten werden.

---

## Festlegung (Umsetzung)

- **Tab-Name:** „Tour“ → **„Listenkunden“** (Kunden, die zu einer Stadt-/Gebietsliste gehören; keine Verwechslung mit „Touren Planer“).
- **Typ-Badge:** Für Listenkunden **„L“** statt „T“ – Anzeige in Karten und Detail: **G / P / L**.

---

## Analyse: „Tour“ → „Listenkunden“ / „L“ in der gesamten App

Damit nirgends mehr „Tour“ für diesen Kundentyp steht, sind folgende Stellen betroffen. **Nicht** geändert werden: Touren Planer, Tourenplaner, `customers_for_tour`, `ohneTour`, `tourSlot`, TourPreisliste (Preisliste Tour/Privat), Tab „Termine & Tour“ (Kunden-Detail) – das sind Tourenplaner/Fahrten oder fachliche Begriffe.

### 1. UI – Tab & Kundenkarten


| Datei                                            | Änderung                                                                                                                                                        |
| ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ui/customermanager/CustomerManagerTopBar.kt`    | Tab-Titel: `"Tour"` → `"Listenkunden"` (oder String-Ressource).                                                                                                 |
| `ui/customermanager/CustomerManagerCard.kt`      | Badge: bei `kundenArt == "Tour"` → Anzeige **„L“** und Farbe (z. B. `label_type_l_letter`); Farbe kann `button_liste_glossy` bleiben.                           |
| `ui/customermanager/CustomerManagerViewModel.kt` | Tab-Filter: `kundenArt == "Tour"` – bleibt so, **wenn** der gespeicherte Wert weiter `"Tour"` ist; bei Migration auf `"Listenkunden"` hier `== "Listenkunden"`. |


### 2. Kunden-Detail & Formulare (Kundenart-Auswahl, Badge)


| Datei                                        | Änderung                                                                                                                                            |
| -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ui/detail/CustomerDetailScreen.kt`          | `typeLabel` / `typeLetter` / `typeColor`: für „Tour“ → Label **„Listenkunden“**, Buchstabe **„L“** (neue String-Ressource), gleiche Farbe.          |
| `ui/detail/CustomerDetailTermineTourForm.kt` | Kundenart-Button: Text von `label_type_tour` auf **„Listenkunden“**, bei Auswahl weiter `kundenArt = "Tour"` (oder `"Listenkunden"` bei Migration). |
| `ui/addcustomer/CustomerStammdatenForm.kt`   | Wie oben: Anzeige **„Listenkunden“** + **„L“**, Wert je nach Strategie.                                                                             |


### 3. Listen-Bereich (Liste bearbeiten / erstellen, Kunde in Liste)


| Datei                                                   | Änderung                                                                                                                                 |
| ------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `ui/listebearbeiten/ListeBearbeitenViewModel.kt`        | Filter „Kunden ohne Liste“: `kundenArt == "Tour"` → ggf. `== "Listenkunden"` (nur bei Daten-Migration).                                  |
| `ui/listebearbeiten/ListeBearbeitenKundeInListeItem.kt` | Badge: bei „Tour“ → **„L“** (z. B. `label_type_l_letter`).                                                                               |
| `ui/listebearbeiten/ListeBearbeitenMetadatenBlock.kt`   | Liste-Art Radio: Anzeige `label_type_tour` → **„Listenkunden“**; gespeicherter Wert `listeArt` „Tour“ oder „Listenkunden“ (siehe unten). |
| `ui/liste/ListeErstellenScreen.kt`                      | Typ-Auswahl: Anzeige **„Listenkunden“**, Wert `selectedType == "Tour"` oder `"Listenkunden"`.                                            |
| `ui/kundenlisten/KundenListenViewModel.kt`              | Default `listeArt = "Tour"` – bei Migration `"Listenkunden"`, sonst unverändert.                                                         |


### 4. Helper & zentrale Typ-Logik


| Datei                            | Änderung                                                                                            |
| -------------------------------- | --------------------------------------------------------------------------------------------------- |
| `ui/CustomerTypeButtonHelper.kt` | Badge-Buchstabe: für „Tour“/Listenkunden → **„L“** (neue Ressource); Kommentar Kunden-Art anpassen. |


### 5. Strings (res/values/strings.xml)


| Key                           | Aktuell                   | Neu (Anzeige)                                              |
| ----------------------------- | ------------------------- | ---------------------------------------------------------- |
| `label_type_tour`             | „Tour“                    | **„Listenkunden“**                                         |
| `label_type_t_letter`         | „T“                       | **„L“** (für Listenkunden-Badge)                           |
| `label_keine_termine_nur`     | „… (Tour-Kunden)“         | „… (Listenkunden)“                                         |
| `label_gehoert_zu_tour_liste` | „Gehört zu Tour-Liste: …“ | z. B. „Gehört zu Liste: …“ oder „Gehört zu Listenliste: …“ |
| `label_listen_termine_hint`   | „… dieser Tour-Liste.“    | „… dieser Listenliste.“                                    |
| `label_list_type`             | „Tour Art:“               | z. B. „Listen-Art:“ oder „Art der Liste:“                  |
| `list_art_format`             | „Tour Art: %1$s“          | z. B. „Listen-Art: %1$s“                                   |


Optional: eigenen Key `label_type_l_letter` = „L“ einführen und überall für Listenkunden-Badge verwenden; dann `label_type_t_letter` nur noch entfernen oder für Abwärtskompatibilität lassen.

### 6. Daten (Firebase / kundenArt, listeArt)

- **Option A (nur Anzeige):** In Firebase bleibt `kundenArt = "Tour"` und `listeArt = "Tour"`. Alle Vergleiche im Code (`kundenArt == "Tour"`) bleiben; nur die **Anzeige** (Strings, Tab-Name, Badge „L“) wird auf „Listenkunden“ / „L“ umgestellt.
- **Option B (Wert + Anzeige):** Einmalige Migration: `kundenArt` „Tour“ → „Listenkunden“, `listeArt` „Tour“ → „Listenkunden“. Dann in **allen** obigen Stellen und in `Customer.kt`/`KundenListe.kt` (Kommentare) sowie in `ListeToTourMigration.kt` / `ListeArtToTourMigration.kt` (nur noch historisch; keine erneute Migration „Liste“→„Listenkunden“ nötig, sofern schon auf „Tour“ migriert) die Vergleiche auf `"Listenkunden"` umstellen.

### 7. Explizit nicht ändern

- **Tourenplaner:** TourPlanner*, `main_btn_touren`, `tourCount`, `loadTourData`, `getCustomersForTourFlow`, Firebase-Pfad `customers_for_tour`, `CUSTOMERS_FOR_TOUR`, `tourRelevantKeys`, `syncTourCustomer` usw.
- **Preise:** `TourPreiseRepository`, `tourPreise`, `erfassung_menu_tourpreise` (Preisliste Tour/Privat) – fachlich „Tour/Privat“-Preisliste.
- **Kunden-Detail:** Tab „Termine & Tour“, `ohneTour`, `tourSlot`, `tourStadt`, `tourListenName` (Name der Liste), `label_tour_plan`, `label_tour_weekday`, `label_tour_city` – beziehen sich auf Abholung/Auslieferung/Tour-Slot, nicht auf die Kundenart „Listenkunden“.
- **Migrationen:** `ListeToTourMigration` / `ListeArtToTourMigration` nicht löschen (bereits gelaufen); ggf. nur Kommentar anpassen, dass „Tour“ heute in der UI „Listenkunden“ heißt.

Bei **Option B** (Datenwert „Listenkunden“) zusätzlich: `tourplanner/TourDataProcessor.kt`, `tourplanner/WochentagslistenProcessorImpl.kt` – dort wird teils nach Kunden ohne Liste / mit Liste unterschieden; alle Vergleiche mit `kundenArt == "Tour"` dann auf `"Listenkunden"` umstellen. `data/repository/KundenListeRepository.kt`: beim Parsen `listeArt` ggf. „Liste“ weiter auf „Tour“ mappen (Migration bereits gelaufen) oder auf „Listenkunden“ (wenn listeArt migriert wird).