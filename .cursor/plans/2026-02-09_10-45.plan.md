---
name: ""
overview: ""
todos: []
isProject: false
---

# Tour Planner: Termine einmal berechnen, cachen, bei Änderung neu berechnen

## Kurz meine Einschätzung

### Vorteile der Idee

- **Performance:** Kein tägliches Neuberechnen aller Termine für alle Kunden. Gerade bei vielen Kunden und „ganzes Jahr“ spart das spürbar Rechenzeit und ggf. Akku.
- **Stabilität:** Regelmäßige Termine sind bei gleichem Intervall und A/L-Tagen deterministisch – einmal berechnet reicht, solange sich nichts am Kunden/den Intervallen ändert.
- **Termine-Tab:** Wenn Termine einmal berechnet und gespeichert sind, kann der Termine-Bereich im Aktionen-Fenster zuverlässig aus diesen Daten lesen, statt sie bei jedem Öffnen neu zu erzeugen.

### Worauf man achten muss

- **Änderungen erkennen:** Es muss klar definiert sein, wann „eine Änderung“ vorliegt (z. B. Intervall geändert, A/L-Tage geändert, Kunden-Termine/Ausnahme-Termine/Urlaub/Regel hinzugefügt oder gelöscht, neuer Kunde, etc.). Nur dann dürfen die gespeicherten Termine für diesen Kunden neu berechnet werden.
- **Speicherort:** Entweder pro Kunde eine gecachte Terminliste (z. B. „Termine für Jahr X“) oder ein zentraler Cache mit Invalidation pro Kunde – wichtig für Offline und um doppelte Logik zu vermeiden.
- **Zeitbereich:** „Einmal für ganzes Jahr“ ist gut definierbar (z. B. Kalenderjahr oder Rollendes Fenster). Wichtig: Was passiert am Jahreswechsel oder wenn der Nutzer weit in die Zukunft scrollt – einmalig erweitern oder erst bei Bedarf?
- **Unregelmäßige / Auf Abruf:** Für unregelmäßige Kunden oder Kunden mit vielen manuellen Terminen/Ausnahmen bleibt es bei „bei Bedarf berechnen oder bei Änderung neu berechnen“ – da bringt Vorberechnung für ein ganzes Jahr oft weniger.

### Fazit

Die Richtung ist sinnvoll: **einmal berechnen, cachen, nur bei Änderungen (pro Kunde) neu berechnen.** So bleibt der Termine-Bereich im Tour Planner stabil und performant, ohne dass die App jeden Tag alles neu rechnet. Wichtig ist ein klares Modell für „wann gilt der Cache noch“ und „wann nur diese Kunden aktualisieren“.

---

*Eingetragen 2026-02-09. Warte auf weitere Anweisungen.*
