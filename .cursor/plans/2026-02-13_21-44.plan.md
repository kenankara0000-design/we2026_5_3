---
name: ""
overview: ""
todos: []
isProject: false
---

# MaÃŸnahmenplan â€“ Analysen 04â€“09 (UX, Flow, Info, Offline, Fehler, Performance)

**Erstellt:** 2026-02-13  
**Grundlage:** Analysen 04â€“09 (alle Screens, alle Aspekte)  
**Status:** Entwurf â€“ keine Umsetzung ohne Freigabe

---

## Priorisierung

Einteilung nach **echtem Nutzer-Impact** (nicht nach Kosmetik):


| Prio  | Bedeutung | Kriterium                                                 |
| ----- | --------- | --------------------------------------------------------- |
| ðŸ”´ P1 | Kritisch  | Nutzer sieht keinen Fehler, Daten unklar, Funktion defekt |
| ðŸŸ¡ P2 | Mittel    | Bedienbarkeit eingeschrÃ¤nkt, Info fehlt, Flow umstÃ¤ndlich |
| ðŸŸ¢ P3 | Niedrig   | Kosmetik, Konsistenz, Langfrist-Optimierung               |


---

## Phase 1: Stille Fehler und defekte States beheben (1 Woche)

*HÃ¶chste PrioritÃ¤t â€“ Nutzer bemerkt Probleme nicht oder wird blockiert.*


| Nr.       | Aufgabe                                                 | Prio | Analyse | Details                                                                                                                           |
| --------- | ------------------------------------------------------- | ---- | ------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **M1-01** | `_isLoading` im TourPlannerViewModel korrekt setzen     | ðŸ”´   | 08, 09  | `_isLoading` wird nie auf `true` gesetzt â†’ LoadingView nie sichtbar. Beim Start des Ladens auf `true`, nach Ergebnis auf `false`. |
| **M1-02** | `_isLoading` im CustomerManagerViewModel korrekt setzen | ðŸ”´   | 08, 09  | Gleiches Problem; `loadCustomers()` ist leer. Flow-Collection-Start mit Loading koppeln.                                          |
| **M1-03** | Stiller Fehler: `getSheetState == null` â†’ Feedback      | ðŸ”´   | 08      | TourPlanner: â€žAktionen" tut nichts wenn `displayedDateMillis == null`. Toast oder Hinweis zeigen.                                 |
| **M1-04** | Stiller Fehler: `_customerId ?: return` â†’ Feedback      | ðŸ”´   | 08      | CustomerDetail: `saveCustomer` bricht ohne Meldung ab. Error-State setzen.                                                        |
| **M1-05** | KundenpreiseScreen: Back zur Suche ermÃ¶glichen          | ðŸ”´   | 05      | `onBackToKundeSuchen` existiert, wird aber nicht genutzt. System-Back beendet Activity statt zur Suche zurÃ¼ck.                    |


**GeschÃ¤tzter Aufwand:** 3â€“5 Tage

---

## Phase 2: Offline-Hinweise erweitern (1 Woche)

*Nur 3 von 24 Screens zeigen Offline-Status â€“ fÃ¼r AuÃŸendienst-Fahrer relevant.*


| Nr.       | Aufgabe                                                | Prio | Analyse | Details                                                                                                  |
| --------- | ------------------------------------------------------ | ---- | ------- | -------------------------------------------------------------------------------------------------------- |
| **M2-01** | SevDesk-Import: Offline-Hinweis + Buttons deaktivieren | ðŸ”´   | 07      | Einziger Screen der zwingend Netzwerk braucht. Import-Buttons deaktivieren wenn offline, Hinweis zeigen. |
| **M2-02** | Kundendetail: Offline-Badge in TopBar                  | ðŸŸ¡   | 07      | `NetworkMonitor` wird nicht genutzt. Analog zu TourPlanner/CustomerManager.                              |
| **M2-03** | Erfassung: Offline-Hinweis                             | ðŸŸ¡   | 07      | Erfassung funktioniert offline, aber Nutzer weiÃŸ das nicht. Kleiner Hinweis genÃ¼gt.                      |
| **M2-04** | Offline-Farbe zentralisieren                           | ðŸŸ¢   | 01, 07  | `Color(0xFFFFEB3B)` hardcodiert in TourPlannerTopBar â†’ `colorResource(R.color.offline_yellow)`.          |


**GeschÃ¤tzter Aufwand:** 3â€“5 Tage

---

## Phase 3: Fehlende Informationen auf Karten ergÃ¤nzen (1 Woche)

*Fahrer brauchen auf der Tour-Karte sofort sichtbare Infos.*


| Nr.       | Aufgabe                                         | Prio | Analyse | Details                                                                                   |
| --------- | ----------------------------------------------- | ---- | ------- | ----------------------------------------------------------------------------------------- |
| **M3-01** | Tour-Karte: Adresse anzeigen                    | ðŸŸ¡   | 06      | `TourPlannerCustomerRow`: Adresse (1 Zeile, klein) unter Name. Fahrer sieht sofort wohin. |
| **M3-02** | Tour-Karte: Telefon anzeigen (optional)         | ðŸŸ¢   | 06      | Klickbar fÃ¼r Schnellanruf. Alternativ: nur im OverviewDialog belassen.                    |
| **M3-03** | Kundenliste: Status-Badge (Pausiert/Ad-hoc)     | ðŸŸ¡   | 06      | `CustomerManagerCard`: Kleiner Badge neben Kundenart. Pausierte/Ad-hoc sofort erkennbar.  |
| **M3-04** | Kundendetail Stammdaten-Tab: ÃœberfÃ¤llig-Hinweis | ðŸŸ¡   | 06      | `statusOverdue` wird bereits Ã¼bergeben, aber nicht angezeigt. Roten Hinweis einbauen.     |
| **M3-05** | Erfassung Kunden-Suche: Adresse/Alias anzeigen  | ðŸŸ¢   | 06      | Verwechslungsgefahr bei Ã¤hnlichen Namen. Adresse oder Alias als zweite Zeile.             |


**GeschÃ¤tzter Aufwand:** 3â€“5 Tage

---

## Phase 4: Error-Handling vereinheitlichen (1â€“2 Wochen)

*4 verschiedene Mechanismen (Toast, Snackbar, Inline, eigene View) â†’ konsistent machen.*


| Nr.       | Aufgabe                                      | Prio | Analyse | Details                                                                                                            |
| --------- | -------------------------------------------- | ---- | ------- | ------------------------------------------------------------------------------------------------------------------ |
| **M4-01** | Loading-States nachrÃ¼sten (fehlende Screens) | ðŸŸ¡   | 08      | KundenpreiseScreen, AusnahmeTerminActivity, ArtikelVerwaltungScreen, BelegeActivity: Loading-Indikator hinzufÃ¼gen. |
| **M4-02** | Error-States nachrÃ¼sten (fehlende Screens)   | ðŸŸ¡   | 08      | KundenpreiseScreen, ArtikelVerwaltungScreen, BelegeActivity: Error-Anzeige mit Retry.                              |
| **M4-03** | Generische Fehlermeldungen verbessern        | ðŸŸ¡   | 08      | `error_message_generic` â†’ spezifischere Texte (z. B. â€žSpeichern fehlgeschlagen", â€žVerbindungsfehler").             |
| **M4-04** | Foto-Upload: Pending-Status sichtbar machen  | ðŸŸ¡   | 07, 08  | Nutzer sieht nicht, ob Uploads ausstehen. Kleiner Hinweis im Kundendetail oder MainScreen.                         |


**GeschÃ¤tzter Aufwand:** 5â€“8 Tage

---

## Phase 5: User-Flow optimieren (1 Woche)

*HÃ¤ufigste Aktion (Tour erledigen) um 1â€“2 Klicks verkÃ¼rzen.*


| Nr.       | Aufgabe                                          | Prio | Analyse | Details                                                                                                                                                  |
| --------- | ------------------------------------------------ | ---- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **M5-01** | Erledigung: Direkter Zugang ohne Zwischen-Dialog | ðŸŸ¡   | 05      | Aktuell: Karte â†’ OverviewDialog â†’ schlieÃŸen â†’ â€žAktionen". Vorschlag: Karte-Klick direkt auf â€žAktionen" (Overview als optionale Geste, z. B. Long-Press). |
| **M5-02** | Kundendetail: â€žNÃ¤chster Kunde" reaktivieren      | ðŸŸ¢   | 05      | `showSaveAndNext = false` â†’ prÃ¼fen ob aktivierbar. Spart ZurÃ¼ck+Karte-Klick.                                                                             |
| **M5-03** | Erfassung: Shortcut aus Kundendetail             | ðŸŸ¢   | 05      | Vom Belege-Tab direkt in Erfassung springen (existiert teilweise, prÃ¼fen).                                                                               |


**GeschÃ¤tzter Aufwand:** 3â€“5 Tage

---

## Phase 6: Konsistenz und Langfrist (fortlaufend)

*Niedrige PrioritÃ¤t â€“ bei Gelegenheit oder im Rahmen anderer Arbeiten.*


| Nr.       | Aufgabe                                                         | Prio | Analyse | Details                                                                                                                                                                                |
| --------- | --------------------------------------------------------------- | ---- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **M6-01** | Button-HÃ¶hen vereinheitlichen                                   | ðŸŸ¢   | 04      | 48/56/64/72dp â†’ Standard festlegen (z. B. Primary 48dp, Secondary 44dp). Teil des Design-Systems aus Plan 01.                                                                          |
| **M6-02** | `forEach` â†’ `LazyColumn` (ListeBearbeiten, BelegDetail, Urlaub) | ðŸŸ¢   | 04, 09  | Bei vielen EintrÃ¤gen ineffizient. Erst relevant bei groÃŸen Datenmengen.                                                                                                                |
| **M6-03** | `derivedStateOf` im TourPlannerViewModel                        | ðŸŸ¢   | 09      | `displayItems` als `mutableStateOf` â†’ Recomposition optimieren.                                                                                                                        |
| **M6-04** | Paging bei 500+ Kunden vorbereiten                              | ðŸŸ¢   | 09      | CustomerManager + TourPlanner. Erst bei tatsÃ¤chlichem Bedarf.                                                                                                                          |
| **M6-05** | Back-Button in TopBar (wo sinnvoll)                             | ðŸŸ¢   | 04      | Android System-Back funktioniert Ã¼berall. TopBar-Pfeil ist â€žnice to have", kein Blocker. Bei tief verschachtelten Screens (Preise â†’ Kundenpreise â†’ Liste) als visuelle Hilfe sinnvoll. |
| **M6-06** | `contentDescription` bei Icons                                  | ðŸŸ¢   | 04      | Barrierefreiheit. `null` bei mehreren Icons im MainScreen, TopBars.                                                                                                                    |
| **M6-07** | ArtikelVerwaltung: Delete-Button aktivieren oder entfernen      | ðŸŸ¢   | 04      | `enabled = false` â†’ entweder implementieren oder Button ausblenden.                                                                                                                    |
| **M6-08** | StatisticsScreen: Sleep-Mode prÃ¼fen                             | ðŸŸ¢   | 04      | `STATISTICS_SLEEP_MODE = true` â†’ Statistiken aktuell deaktiviert. Absichtlich?                                                                                                         |


**GeschÃ¤tzter Aufwand:** Fortlaufend, je 0,5â€“1 Tag pro Aufgabe

---

## Zusammenfassung


| Phase                                    | Aufgaben | Prio  | GeschÃ¤tzter Aufwand |
| ---------------------------------------- | -------- | ----- | ------------------- |
| Phase 1: Stille Fehler + defekte States  | 5        | ðŸ”´    | 3â€“5 Tage            |
| Phase 2: Offline-Hinweise                | 4        | ðŸ”´/ðŸŸ¡ | 3â€“5 Tage            |
| Phase 3: Fehlende Infos auf Karten       | 5        | ðŸŸ¡    | 3â€“5 Tage            |
| Phase 4: Error-Handling vereinheitlichen | 4        | ðŸŸ¡    | 5â€“8 Tage            |
| Phase 5: User-Flow optimieren            | 3        | ðŸŸ¡    | 3â€“5 Tage            |
| Phase 6: Konsistenz + Langfrist          | 8        | ðŸŸ¢    | fortlaufend         |
| **Gesamt**                               | **29**   |       | **4â€“6 Wochen**      |


---

## AbhÃ¤ngigkeiten zum bestehenden MaÃŸnahmenplan (01â€“03)


| Dieser Plan                             | BenÃ¶tigt aus Plan 01â€“03                  | Phase                                        |
| --------------------------------------- | ---------------------------------------- | -------------------------------------------- |
| M4-01, M4-02 (Loading/Error nachrÃ¼sten) | P2-02 (`AppLoadingView`, `AppErrorView`) | Idealerweise zuerst P2-02, dann M4           |
| M6-01 (Button-HÃ¶hen)                    | P1-01 bis P1-04 (Design-System)          | Erst Design-System, dann Vereinheitlichung   |
| M1-01, M1-02 (isLoading setzen)         | P3-01 (`BaseViewModel.isLoading`)        | Kann unabhÃ¤ngig oder zusammen gemacht werden |
| M2-04 (Offline-Farbe)                   | P1-01 (AppColors)                        | Kleiner Fix, kann auch separat               |


**Empfohlene Reihenfolge:**

1. **Phase 1 (stille Fehler)** â†’ sofort, unabhÃ¤ngig
2. **Phase 2 (Offline)** â†’ sofort, unabhÃ¤ngig
3. **Plan 01â€“03, Phase 1â€“2** â†’ Design-System + Composables
4. **Phase 3â€“5** â†’ danach, profitiert von neuem Design-System
5. **Phase 6** â†’ fortlaufend

---

*Dieser Plan dient als Referenz. Keine Ã„nderung ohne ausdrÃ¼ckliche Freigabe (vgl. `.cursor/rules/nicht-kaputt-machen.mdc`).*