---
name: ""
overview: ""
todos: []
isProject: false
---

# UX-Tiefenanalyse: Kundendetail (3 Tabs, Normal- & Bearbeitungsmodus)

**Erstellt:** 2026-02-13 23:29  
**Grundlage:** 10 Screenshots (4Ã— Normal, 6Ã— Bearbeitung) + Code-Analyse aller 23 relevanten Dateien  
**Scope:** `CustomerDetailScreen` mit `StammdatenTab`, `TermineTab`, `BelegeTab`

---

## ğŸŸ¢ Session-Handoff (Stand 2026-02-14)

**Phase A + B: erledigt.** Quick Wins (7) und UX-Verbesserungen (6) umgesetzt.

**Plan-PrioritÃ¤t:** Gleichwertig mit Massnahmenplan. Phase C: C1â€“C5 umgesetzt (2026-02-14).


| Phase | Status     | NÃ¤chster Schritt                          |
| ----- | ---------- | ----------------------------------------- |
| **A** | âœ… erledigt | â€“                                         |
| **B** | âœ… erledigt | B1â€“B6 umgesetzt (2026-02-14)              |
| **C** | âœ… erledigt | C1â€“C5 umgesetzt (2026-02-14)              |
| **D** | offen      | Optional (Cards, Wochentag-Auswahl, etc.) |


**Phase B â€“ umgesetzt (6 Punkte):**

- B1: Termin-Info Option C (3 Bereiche, nur Werte)
- B2: Intervall-Info unter â€NÃ¤chster Terminâ€œ
- B3: StatusSection im Edit VOR das Formular
- B4: T1.3 â€Alle Termineâ€œ mit Typ-Filter (Chips)
- B5: Belege-Tab: Buttons statt Dialog
- B6: Ungespeicherte-Ã„nderungen-Dialog (BackHandler)

**Wichtige Dateien:** `CustomerDetailStammdatenTab.kt`, `CustomerDetailScreen.kt`, `CustomerDetailTermineTab.kt`, `CustomerDetailBelegeTab.kt`, `CustomerStammdatenForm.kt`, `CustomerDetailTermineTourForm.kt`

---

## Ãœbersicht: Ist-Zustand


| Tab                | Normal-Modus                                                                                                                                    | Bearbeitungs-Modus                                                                                                                |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **Stammdaten**     | ActionsRow (Urlaub, Bearbeiten), Adresse, Telefon, Notizen (read-only), Fotos                                                                   | VollstÃ¤ndiges Formular (Name, Alias, Adresse, PLZ/Stadt, Koordinaten, Telefon, Notizen), Urlaub-Button, Erfassungen-Button, Fotos |
| **Termine & Tour** | StatusSection (Aktiv-Toggle + Neuer Termin), NÃ¤chster Termin, K.Art/T.-Typ/A-L-Tag, 3Ã— expandierbare Sektionen (Ausnahme, Kunden, Alle Termine) | TermineTourForm (K.Art, T.-Typ, Startdatum, Intervall, Wochentage, Weitere Angaben) + alle Sektionen von Normal                   |
| **Belege**         | Offen/Erledigt-Toggle, Beleg-Liste, "Neue Erfassung"                                                                                            | Im Edit: Tab **ausgegraut, nicht klickbar** (B1.2 gewÃ¤hlt)                                                                        |


---

## TEIL 1: Grundlegende Probleme (Tab-Ã¼bergreifend)

### P1: Globaler Edit-Modus Ã¼ber alle Tabs ist verwirrend

**Problem:** Ein Klick auf â€Bearbeiten" schaltet **alle 3 Tabs** in den Edit-Modus, aber:

- Belege-Tab Ã¤ndert sich **gar nicht**
- TopBar zeigt â€Speichern" auch auf dem Belege-Tab
- Nutzer kann in Stammdaten **und** Termine gleichzeitig Ã„nderungen machen â†’ unklar was gespeichert wird

**Vorschlag:** 

- **Option A (empfohlen):** Edit-Modus pro Tab. Jeder Tab hat seinen eigenen â€Bearbeiten"-Button. Speichern gilt nur fÃ¼r den aktiven Tab. Belege-Tab hat keinen Edit-Modus.
- **Option B:** Globaler Edit-Modus beibehalten, aber Belege-Tab visuell kennzeichnen (z. B. â€Dieser Tab wird nicht bearbeitet") und den Speichern-Button nur anzeigen, wenn man auf einem editierbaren Tab ist.

### P2: Kein Warndialog bei ungespeicherten Ã„nderungen

**Problem:** Nutzer kann Felder Ã¤ndern, Tab wechseln, und zurÃ¼cknavigieren â†’ Ã„nderungen gehen stillschweigend verloren.

**Vorschlag:** `BackHandler` mit Dialog â€Ungespeicherte Ã„nderungen verwerfen?" wenn `formState` geÃ¤ndert wurde.

### P3: Edit-Modus produziert extrem lange Scroll-Seiten

**Problem:** Im Bearbeitungsmodus wird der Termine-Tab besonders lang:

- TermineTourForm (~300px): K.Art, T.-Typ, Startdatum, Intervall, Wochentage, Weitere Angaben (expandierbar)
- StatusSection (~80px)
- NÃ¤chster Termin (~60px)
- 3Ã— Expandierbare Sektionen (~je 50px eingeklappt, 300px aufgeklappt)
- **GeschÃ¤tzte GesamtlÃ¤nge: >1500px** (3Ã— BildschirmhÃ¶he)

**Vorschlag:** Sektionen gruppieren, weniger wichtige Felder in â€Weitere Angaben" verschieben, oder Formular in Schritte aufteilen.

---

## TEIL 2: Tab â€Stammdaten" â€“ Detailanalyse

### S1: Normaler Modus â€“ gut, aber Verbesserungspotenzial

**Positiv:**

- Klare Label/Wert-Paare
- â€Nicht gesetzt" als Platzhalter ist verstÃ¤ndlich
- Fotos am Ende â€“ logisch
- ÃœberfÃ¤llig-Hinweis oben â€“ gute Sichtbarkeit

**Probleme & VorschlÃ¤ge:**


| Nr.  | Problem                                                                                           | Vorschlag                                                                                               | PrioritÃ¤t |
| ---- | ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | --------- |
| S1.1 | **Viel Leerraum** unter Fotos (Screenshot zeigt 50% leeren Bildschirm)                            | Kompaktere Darstellung; z. B. Adresse, Telefon, Notizen in einer Card zusammenfassen                    | Mittel    |
| S1.2 | **Kein visuelles Grouping** â€“ Felder sind nur mit Spacer getrennt                                 | Stammdaten in einer Card oder mit Divider gruppieren                                                    | Mittel    |
| S1.3 | **Adresse klickbar** (Ã¶ffnet Maps), aber **kein visueller Hinweis** (kein Icon, kein Unterstrich) | Maps-Icon oder Chevron rechts neben Adresse                                                             | Hoch      |
| S1.4 | **Telefon klickbar** (Anruf), aber **kein visueller Hinweis**                                     | Telefon-Icon oder Anruf-Icon rechts neben Telefonnummer                                                 | Hoch      |
| S1.5 | **Kundenart/Typ/Intervall fehlt** im Normal-Stammdaten                                            | Eventuell eine kompakte Info-Zeile unter dem Namen (z. B. â€Gewerblich Â· RegelmÃ¤ÃŸig Â· 7-Tage-Intervall") | Niedrig   |


### S2: Bearbeitungs-Modus â€“ zu viel, zu gemischt

**Probleme & VorschlÃ¤ge:**


| Nr.  | Problem                                                                                                                       | Vorschlag                                                                                           | PrioritÃ¤t |
| ---- | ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | --------- |
| S2.1 | **Urlaub-Button im Edit-Modus redundant** â€“ ist bereits in Normal-ActionsRow UND im TermineTab (NeuerTerminArtSheet)          | Urlaub-Button aus dem Stammdaten-Edit entfernen. Urlaub gehÃ¶rt in den Termine-Tab.                  | Hoch      |
| S2.2 | **â€Artikel hinzufÃ¼gen" (Erfassungen) im Edit-Modus deplatziert** â€“ Erfassungen haben nichts mit Stammdaten-Bearbeitung zu tun | Komplett entfernen aus Stammdaten-Edit. Erfassungen gehÃ¶ren in den Belege-Tab.                      | Hoch      |
| S2.3 | **Koordinaten-Feld** â€“ Manuelle Eingabe von Lat/Lng ist unrealistisch fÃ¼r Fahrer                                              | Koordinaten-Feld in â€Weitere Angaben" verschieben oder ganz ausblenden (auto-geocoding aus Adresse) | Mittel    |
| S2.4 | **Name und Alias getrennt** â€“ fÃ¼r viele Kunden ist Alias = verkÃ¼rzter Name â†’ Verwirrung was wofÃ¼r                             | Hint-Text klarer machen: â€Voller Name (z. B. Firma)" und â€Anzeigename (z. B. Kurz-Name fÃ¼r Tour)"   | Niedrig   |
| S2.5 | **Kein Fokus-Management** â€“ beim Ã–ffnen des Edit-Modus scrollt der Tab nicht nach oben und kein Feld hat Fokus                | Beim Wechsel in Edit-Modus zum Anfang scrollen                                                      | Niedrig   |


### S3: Vorschlag â€“ Stammdaten-Tab Redesign

**Normal-Modus (kompakter):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš  ÃœberfÃ¤llig-Hinweis            â”‚  (wenn zutreffend)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Urlaub]  [Bearbeiten]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ Am Bahnhof 78, 09477 JÃ¶h.. >â”‚  (klickbar â†’ Maps)
â”‚ ğŸ“ 0123 456789                 >â”‚  (klickbar â†’ Anruf)
â”‚ ğŸ“ Notizen: ...                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“· Fotos   [+ Foto hinzufÃ¼gen] â”‚
â”‚  [img] [img] [img]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Edit-Modus (bereinigt):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name (Pflichtfeld)     [______] â”‚
â”‚ Alias (Anzeigename)   [______] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Adresse               [______] â”‚
â”‚ PLZ [___]  Stadt      [______] â”‚
â”‚ Telefon               [______] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Notizen               [______] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¸ Weitere Angaben (Koordinaten) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“· Fotos   [+ Foto hinzufÃ¼gen] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

â†’ Kein Urlaub-Button, kein Erfassungen-Button, Koordinaten in â€Weitere Angaben"

---

## TEIL 3: Tab â€Termine & Tour" â€“ Detailanalyse

### T1: Normaler Modus â€“ grundsÃ¤tzlich gut strukturiert

**Positiv:**

- Aktiv/Pausiert-Toggle intuitiv
- â€+ Neue Termin" prominent platziert
- 3 expandierbare Sektionen (Ausnahme, Kunden, Alle) â€“ vermeidet Ãœberladung
- Farbige A/L-Chips in â€Alle Termine" â€“ gut unterscheidbar

**Probleme & VorschlÃ¤ge:**


| Nr.  | Problem                                                                                                                                    | Vorschlag                                                                                                                                                                                                         | PrioritÃ¤t |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| T1.1 | **K.Art / T.-Typ / A-Tag/L-Tag** â€“ Labels sind stark abgekÃ¼rzt und schwer verstÃ¤ndlich                                                     | **Option C:** Gemeinsame Ãœberschrift â€Termin-Infoâ€œ, darunter 3 separate Bereiche (wie vorher), jeder mit eigenem Wert: [Gew] [Regelm] [Mo A / Di L]. Keine einzelnen Labels pro Bereich. Kontext aus Reihenfolge. | Hoch      |
| T1.2 | **3 Spalten (K.Art, T.-Typ, A-Tag/L-Tag)** â€“ auf kleinen Bildschirmen gequetscht, Text wird abgeschnitten â€Gew.", â€Regelm."                | Mit Option C (T1.1) gelÃ¶st: 3 Bereiche bleiben, aber nur Werte (ohne Labels K.Art, T.-Typ, A-Tag/L-Tag).                                                                                                          | Hoch      |
| T1.3 | **Ausnahme-Termine, Kunden-Termine, Alle Termine** â€“ 3 separate expandierbare Sektionen â†’ Nutzer muss bis zu 3Ã— klicken, um alles zu sehen | **GewÃ¤hlt:** â€Alle Termine" zeigt alles, mit Typ-Filter (Chips: Alle / RegulÃ¤r / Ausnahme / Kunden). Eine Sektion statt drei.                                                                                     | Mittel    |
| T1.4 | **â€Alle Termine" hat internen Scroll** (max 6 Zeilen) â†’ Scroll-in-Scroll                                                                   | Auf `heightIn(max=...)` verzichten und den Tab selbst scrollen lassen (LazyColumn statt Column+verticalScroll fÃ¼r den ganzen Tab)                                                                                 | Mittel    |
| T1.5 | **Kein Intervall-Info im Normal-Modus** â€“ Nutzer sieht nicht â€alle 7 Tage" oder â€alle 14 Tage"                                             | Intervall-Info unter â€NÃ¤chster Termin" anzeigen: z. B. â€Intervall: 7 Tage (Abholung Mo â†’ Lieferung Di)"                                                                                                           | Mittel    |


### T2: Bearbeitungs-Modus â€“ sehr lang und redundant

**Probleme & VorschlÃ¤ge:**


| Nr.  | Problem                                                                                                                                                                                                                                                               | Vorschlag                                                                                                                                                                                                                                   | PrioritÃ¤t   |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| T2.1 | **~320 Zeilen Code-Duplizierung** zwischen `CustomerDetailTermineTourForm` (324 Z.) und `CustomerStammdatenForm` (408 Z., davon ~250 Z. bei showTermineTourSection=true) â€“ fast identische Felder (K.Art, T.-Typ, Startdatum, Intervall, Wochentage, Weitere Angaben) | Gemeinsame Composable `TermineTourFormFields` extrahieren, die in beiden Forms wiederverwendet wird                                                                                                                                         | Hoch (Code) |
| T2.2 | **TermineTourForm + StatusSection + NÃ¤chsterTermin + 3 expand. Sektionen** = extrem langer Scroll                                                                                                                                                                     | TermineTourForm in einer scrollbaren Card mit klarer Abgrenzung von den read-only Sektionen                                                                                                                                                 | Hoch        |
| T2.3 | **â€Weitere Angaben" (Uhrzeit, Kundennummer, Tags, Tour-Plan)** â€“ tief versteckt in ExpandableSection â†’ viele Nutzer finden es nie                                                                                                                                     | Nur selten gebrauchte Felder hier lassen (Kundennummer, Tour-Plan). Uhrzeit und Tags sichtbar machen.                                                                                                                                       | Mittel      |
| T2.4 | **Wochentag-Auswahl (Mo-So)** nimmt viel Platz ein (2Ã— 7 Buttons) â†’ ~120px pro Wochentag-Zeile = ~240px                                                                                                                                                               | **GewÃ¤hlt: Variante C** (Inline A/L, zwei Zeilen mit â€A:â€œ und â€L:â€œ). Ãœbersichtlich, keine starke Verkleinerung â€“ groÃŸe Finger. Dropdown = mehrere Klicks; zu kleine Felder = zweites/drittes Tippen nÃ¶tig. Variante C bleibt gut bedienbar. | Niedrig     |
| T2.5 | **StatusSection (Aktiv-Toggle) erscheint NACH dem Formular** â†’ Nutzer scrollt erst am Formular vorbei, um Status zu sehen/Ã¤ndern                                                                                                                                      | StatusSection **vor** das Formular setzen (wie im Normal-Modus)                                                                                                                                                                             | Mittel      |


### T3: Vorschlag â€“ Termine-Tab Redesign

**Option C (T1.1, bewusst gleiches Layout):** Gemeinsame Ãœberschrift â€Termin-Infoâ€œ, darunter 3 separate Bereiche (jeder in eigenem Feld), nur Werte â€“ keine Labels pro Bereich. Kontext aus Reihenfolge.

**Normal-Modus (verbesserte Lesbarkeit):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Aktiv ğŸŸ¢]    [+ Neue Termin]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NÃ¤chster Termin                 â”‚
â”‚ Mo, 16.02.2026                  â”‚
â”‚ Intervall: 7 Tage (Mo A â†’ Di L)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Termin-Info                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Gew â”‚ â”‚Regelmâ”‚ â”‚Mo A/Di L â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Alle Termine                    â”‚
â”‚ [Alle] [RegulÃ¤r] [Ausnahme] [Kunden]â”‚
â”‚ A 16.02.26  L 17.02.26  â€¦      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

â†’ Option C: 3 Bereiche, jeder eigenes Feld. T1.3: Eine Sektion â€Alle Termine" mit Typ-Filter-Chips (Alle / RegulÃ¤r / Ausnahme / Kunden)

**Edit-Modus (straffer):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Aktiv ğŸŸ¢]    [+ Neue Termin]  â”‚  â† Status ZUERST
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Kundenart:  â—‰ Gew. â—‹ Pri. â—‹ L â”‚
â”‚ Termin-Typ: â—‰ Reg. â—‹ Unreg. â—‹ â”‚
â”‚ Startdatum: 11.2.2026  â–¡ o.Tourâ”‚
â”‚ Intervall [7]  L-Termin [1]    â”‚
â”‚ A: [Mo][Di][Mi][Do][Fr][Sa][So]â”‚  â† T2.4 Variante C: Inline, Ã¼bersichtlich
â”‚ L: [Mo][Di][Mi][Do][Fr][Sa][So]â”‚  â† groÃŸe Touch-Targets (groÃŸe Finger)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¸ Weitere Angaben               â”‚
â”‚   (Uhrzeit, Tags, Tour-Plan)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NÃ¤chster Termin: Mo, 16.02.2026â”‚
â”‚ Alle Termine [Alle][RegulÃ¤r][â€¦]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TEIL 4: Tab â€Belege" â€“ Detailanalyse

### B1: GrundsÃ¤tzlich minimalistisch â€“ aber problematisch


| Nr.  | Problem                                                                                                                         | Vorschlag                                                                                                                                         | PrioritÃ¤t |
| ---- | ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| B1.1 | **Redundanter â€Belege"-Titel** â€“ Tab heiÃŸt bereits â€Belege", darÃ¼ber nochmal â€Belege" als Text                                  | Titel entfernen oder durch kontextuelle Info ersetzen (z. B. â€3 offene Belege")                                                                   | Mittel    |
| B1.2 | **Identisch in Normal- und Edit-Modus** â€“ TopBar zeigt â€Speichern" im Edit, aber Belege haben nichts zu speichern â†’ irrefÃ¼hrend | **GewÃ¤hlt:** Im Bearbeitungsmodus den Belege-Tab **ausgegraut und nicht klickbar** machen. Dadurch ist klar: Belege werden hier nicht bearbeitet. | Hoch      |
| B1.3 | **â€Neue Erfassung" â†’ AlertDialog mit 3 Optionen** â€“ Dialog ist nicht ideal fÃ¼r Navigation, fÃ¼hlt sich wie Unterbrechung an      | Statt Dialog: 3 Buttons direkt im Tab untereinander, oder ein BottomSheet (konsistenter mit NeuerTerminArtSheet)                                  | Mittel    |
| B1.5 | **LazyColumn in Column** â€“ LazyColumn hat keine feste HÃ¶he, innerhalb eines scrollbaren Parents â†’ potenzielle Scroll-Probleme   | LazyColumn sollte den gesamten verfÃ¼gbaren Platz einnehmen (`fillMaxHeight`) oder der Parent sollte nicht scrollen                                | Mittel    |


### B2: Vorschlag â€“ Belege-Tab Redesign

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‰ Offen  â—‹ Erledigt            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œ Februar 2026 â”€â”€â”€â”€â”€â”€ 2 Erf. â” â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œ Januar 2026 â”€â”€â”€â”€â”€â”€â”€ 1 Erf. â” â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“· Kamera/Foto erfassen]      â”‚
â”‚ [ğŸ“‹ WÃ¤scheliste-Formular]      â”‚
â”‚ [âœï¸ Manuell erfassen]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

â†’ Buttons direkt sichtbar statt Dialog

---

## TEIL 5: Code-Architektur-Probleme


| Nr. | Problem                                                                                            | Auswirkung                               | Vorschlag                                                                |
| --- | -------------------------------------------------------------------------------------------------- | ---------------------------------------- | ------------------------------------------------------------------------ |
| C1  | **~250 Zeilen Code-Duplizierung** (TermineTourForm â†” StammdatenForm)                               | Wartung, Inkonsistenz-Risiko             | Gemeinsame `TermineTourFormFields`-Composable                            |
| C2  | **CustomerDetailScreen.kt hat 85 Parameter**                                                       | Unlesbar, fehleranfÃ¤llig                 | State-Objekt einfÃ¼hren (`CustomerDetailUiState`) und Callback-Interfaces |
| C3  | **performSave-Lambda (80 Zeilen) direkt im Composable**                                            | Keine Testbarkeit, Recomposition-Problem | In ViewModel verschieben                                                 |
| C4  | **formState als `remember` im Screen + editFormState im ViewModel** â€“ zwei parallele State-Quellen | Race-Conditions, Verwirrung              | Einen einzigen State-Flow im ViewModel                                   |
| C5  | **Colors als Parameter durch alle Composables** (primaryBlue, textPrimary, etc.)                   | AufgeblÃ¤hte Parameter-Listen             | `MaterialTheme.colorScheme` oder eigenes `AppTheme` verwenden            |


---

## TEIL 6: Priorisierte MaÃŸnahmen-Empfehlung

### Phase A: Quick Wins (1â€“2 Tage) âœ… **Erledigt 2026-02-13**


| #   | MaÃŸnahme                                                      | Betrifft               | Impact                | Status     |
| --- | ------------------------------------------------------------- | ---------------------- | --------------------- | ---------- |
| A1  | Urlaub-Button aus Stammdaten-Edit entfernen                   | `StammdatenTab`        | Weniger Verwirrung    | âœ… erledigt |
| A2  | Erfassungen-Button aus Stammdaten-Edit entfernen              | `StammdatenTab`        | Weniger Verwirrung    | âœ… erledigt |
| A3  | Redundanten â€Belege"-Titel entfernen                          | `BelegeTab`            | Sauberer              | âœ… erledigt |
| A4  | Maps-Icon neben Adresse (Normal-Modus)                        | `StammdatenTab`        | Klickbarkeit sichtbar | âœ… erledigt |
| A5  | Telefon-Icon neben Telefonnummer (Normal-Modus)               | `StammdatenTab`        | Klickbarkeit sichtbar | âœ… erledigt |
| A6  | Koordinaten-Feld in â€Weitere Angaben" verschieben             | `StammdatenForm`       | Weniger Edit-Felder   | âœ… erledigt |
| A7  | Belege-Tab im Bearbeitungsmodus ausgegraut und nicht klickbar | `CustomerDetailScreen` | B1.2 gelÃ¶st           | âœ… erledigt |


### Phase B: UX-Verbesserungen (3â€“5 Tage) âœ… ERLEDIGT (2026-02-14)


| #   | MaÃŸnahme                                                                                     | Betrifft               | Impact                    | Status     |
| --- | -------------------------------------------------------------------------------------------- | ---------------------- | ------------------------- | ---------- |
| B1  | Option C: Termin-Info mit 3 Bereichen, nur Werte in je eigenem Feld [Gew][Regelm][Mo A/Di L] | `KundenTypSection`     | Gleiches Layout, lesbarer | âœ… erledigt |
| B2  | Intervall-Info im Normal-Modus unter â€NÃ¤chster Termin"                                       | `TermineTab`           | Wichtige Info sichtbar    | âœ… erledigt |
| B3  | StatusSection im Edit-Modus VOR das Formular setzen                                          | `TermineTab`           | Konsistenz mit Normal     | âœ… erledigt |
| B4  | T1.3: â€Alle Termine" mit Typ-Filter (Chips: Alle / RegulÃ¤r / Ausnahme / Kunden)              | `TermineTab`           | Eine Sektion statt drei   | âœ… erledigt |
| B5  | Belege-Tab: Buttons statt Dialog fÃ¼r Neue Erfassung                                          | `BelegeTab`            | Direkter Zugang           | âœ… erledigt |
| B6  | Ungespeicherte-Ã„nderungen-Dialog (BackHandler)                                               | `CustomerDetailScreen` | Datenverlust vermeiden    | âœ… erledigt |


### Phase C: Strukturelle Verbesserungen (5â€“8 Tage)


| #   | MaÃŸnahme                                                       | Betrifft           | Impact                    | Status     |
| --- | -------------------------------------------------------------- | ------------------ | ------------------------- | ---------- |
| C1  | Code-Duplizierung TermineTourForm â†” StammdatenForm eliminieren | Beide Forms        | Wartbarkeit               | âœ… erledigt |
| C2  | Parameter-Reduktion: CustomerDetailUiState-Objekt              | Screen + Tabs      | Lesbarkeit                | âœ… erledigt |
| C3  | performSave-Logik ins ViewModel                                | Screen + VM        | Testbarkeit               | âœ… erledigt |
| C4  | Einheitliche State-Quelle (nur ViewModel-Flow)                 | Screen + VM        | Konsistenz                | âœ… erledigt |
| C5  | Scroll-in-Scroll bei â€Alle Termine" eliminieren                | `AlleTermineBlock` | Besseres Scroll-Verhalten | âœ… erledigt |


### Phase D: Optional / Zukunft


| #   | MaÃŸnahme                                                                           | Impact                                       |
| --- | ---------------------------------------------------------------------------------- | -------------------------------------------- |
| D3  | Stammdaten in Cards mit visueller Gruppierung                                      | Moderneres Design                            |
| D4  | T2.4 Variante C: Wochentag-Auswahl Inline A/L (Ã¼bersichtlich, groÃŸe Touch-Targets) | Platz sparen, gut bedienbar fÃ¼r groÃŸe Finger |
| D6  | Geocoding aus Adresse (statt manueller Koordinaten)                                | Praktischer fÃ¼r Fahrer                       |


---

## TEIL 7: Zusammenfassung der Kernaussagen

1. **Stammdaten-Edit ist Ã¼berladen** â€“ Urlaub und Erfassungen gehÃ¶ren nicht hierhin
2. **Termine-Tab Edit ist zu lang** â€“ Status sollte oben stehen, Code ist dupliziert
3. **Belege-Tab im Edit-Modus** â€“ GewÃ¤hlt: Tab ausgegraut und nicht klickbar
4. **K.Art/T.-Typ-Darstellung im Normal-Modus** â€“ LÃ¶sung: Option C (3 Bereiche, je eigenes Feld, nur Werte ohne Labels)
5. **Klickbare Elemente (Adresse, Telefon)** haben keinen visuellen Hinweis
6. **3 expandierbare Sektionen im Termine-Tab** â€“ T1.3 gewÃ¤hlt: â€Alle Termine" mit Typ-Filter-Chips (eine Sektion)
7. **85 Parameter im Screen** â€“ Code-Architektur erschwert Wartung und Erweiterung
8. **Kein Schutz vor Datenverlust** bei Back-Navigation im Edit-Modus

---

**NÃ¤chster Schritt:** Phase C umgesetzt (C1, C4, C5). C2/C3 (UiState, performSave ins VM) optional fÃ¼r spÃ¤tere Session.